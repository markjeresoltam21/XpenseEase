<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XpenseEase - Firebase Account Setup</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #4A90E2 0%, #50C878 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .container {
            background: white;
            border-radius: 16px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            color: #4A90E2;
            margin-bottom: 10px;
            font-size: 28px;
        }
        .subtitle {
            color: #7F8C8D;
            margin-bottom: 30px;
        }
        .info-box {
            background: #E8F4F8;
            border-left: 4px solid #4A90E2;
            padding: 15px;
            margin-bottom: 30px;
            border-radius: 4px;
        }
        .info-box p {
            margin: 5px 0;
            color: #2C3E50;
            font-size: 14px;
        }
        .account-section {
            background: #F8F9FA;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .account-section h3 {
            color: #2C3E50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }
        .badge-admin {
            background: #E74C3C;
            color: white;
        }
        .badge-student {
            background: #4A90E2;
            color: white;
        }
        .credential {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: white;
            border-radius: 4px;
            margin-bottom: 8px;
        }
        .credential strong {
            color: #2C3E50;
        }
        .credential span {
            color: #7F8C8D;
            font-family: 'Courier New', monospace;
        }
        button {
            width: 100%;
            padding: 16px;
            background: #4A90E2;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        button:hover {
            background: #357ABD;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(74, 144, 226, 0.4);
        }
        button:disabled {
            background: #BDC3C7;
            cursor: not-allowed;
            transform: none;
        }
        .status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }
        .status.success {
            background: #D4EDDA;
            border: 1px solid #C3E6CB;
            color: #155724;
            display: block;
        }
        .status.error {
            background: #F8D7DA;
            border: 1px solid #F5C6CB;
            color: #721C24;
            display: block;
        }
        .status.loading {
            background: #FFF3CD;
            border: 1px solid #FFEAA7;
            color: #856404;
            display: block;
        }
        .status-icon {
            display: inline-block;
            margin-right: 8px;
            font-size: 18px;
        }
        .instructions {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #E1E8ED;
        }
        .instructions h3 {
            color: #2C3E50;
            margin-bottom: 15px;
        }
        .instructions ol {
            margin-left: 20px;
        }
        .instructions li {
            margin: 10px 0;
            color: #2C3E50;
            line-height: 1.6;
        }
        .instructions code {
            background: #F8F9FA;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #E74C3C;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî• XpenseEase Setup</h1>
        <p class="subtitle">Create initial Admin and Student accounts</p>

        <div class="info-box">
            <p><strong>üìã What this does:</strong></p>
            <p>‚Ä¢ Creates admin@gmail.com account with admin role</p>
            <p>‚Ä¢ Creates markjeresoltam@gmail.com account with student role</p>
            <p>‚Ä¢ Stores user data in Firestore database</p>
        </div>

        <div class="account-section">
            <h3>
                <span>üõ°Ô∏è Admin Account</span>
                <span class="badge badge-admin">ADMIN</span>
            </h3>
            <div class="credential">
                <strong>Email:</strong>
                <span>admin@gmail.com</span>
            </div>
            <div class="credential">
                <strong>Password:</strong>
                <span>admin123</span>
            </div>
        </div>

        <div class="account-section">
            <h3>
                <span>üéì Student Account</span>
                <span class="badge badge-student">STUDENT</span>
            </h3>
            <div class="credential">
                <strong>Email:</strong>
                <span>markjeresoltam@gmail.com</span>
            </div>
            <div class="credential">
                <strong>Password:</strong>
                <span>student123</span>
            </div>
            <div class="credential">
                <strong>Student ID:</strong>
                <span>2024-00001</span>
            </div>
            <div class="credential">
                <strong>Course:</strong>
                <span>BS Computer Science</span>
            </div>
            <div class="credential">
                <strong>Year:</strong>
                <span>3rd</span>
            </div>
        </div>

        <button id="createBtn" onclick="createAccounts()">
            Create Accounts in Firebase
        </button>

        <div id="status" class="status"></div>

        <div class="instructions">
            <h3>üìù Manual Setup (Recommended for Expo)</h3>
            <ol>
                <li>Go to <code>Firebase Console ‚Üí Authentication</code></li>
                <li>Enable <strong>Email/Password</strong> authentication</li>
                <li>Click <strong>"Add user"</strong> for each account above</li>
                <li>Go to <code>Firestore Database</code> and create <code>users</code> collection</li>
                <li>Add documents with the UIDs and data shown above</li>
                <li>Open <strong>FIREBASE_SETUP.md</strong> for detailed steps</li>
            </ol>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, createUserWithEmailAndPassword, updateProfile } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore, doc, setDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyDM51MI7NHMRRk54odYDliEatnZ2bzMc4I",
            authDomain: "xpenseease.firebaseapp.com",
            projectId: "xpenseease",
            storageBucket: "xpenseease.firebasestorage.app",
            messagingSenderId: "63324815135",
            appId: "1:63324815135:android:51e8a70c03f20efe707a2a"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        window.createAccounts = async function() {
            const btn = document.getElementById('createBtn');
            const status = document.getElementById('status');
            
            btn.disabled = true;
            status.className = 'status loading';
            status.innerHTML = '<span class="status-icon">‚è≥</span>Creating accounts...';

            try {
                // Create Admin
                status.innerHTML = '<span class="status-icon">‚è≥</span>Creating admin account...';
                const adminCred = await createUserWithEmailAndPassword(auth, 'admin@gmail.com', 'admin123');
                
                await updateProfile(adminCred.user, { displayName: 'Admin User' });
                
                await setDoc(doc(db, 'users', adminCred.user.uid), {
                    uid: adminCred.user.uid,
                    email: 'admin@gmail.com',
                    name: 'Admin User',
                    role: 'admin',
                    studentId: null,
                    course: null,
                    yearLevel: null,
                    createdAt: new Date().toISOString()
                });

                // Create Student
                status.innerHTML = '<span class="status-icon">‚è≥</span>Creating student account...';
                const studentCred = await createUserWithEmailAndPassword(auth, 'markjeresoltam@gmail.com', 'student123');
                
                await updateProfile(studentCred.user, { displayName: 'Mark Jere Soltam' });
                
                await setDoc(doc(db, 'users', studentCred.user.uid), {
                    uid: studentCred.user.uid,
                    email: 'markjeresoltam@gmail.com',
                    name: 'Mark Jere Soltam',
                    role: 'student',
                    studentId: '2024-00001',
                    course: 'BS Computer Science',
                    yearLevel: '3rd',
                    createdAt: new Date().toISOString()
                });

                status.className = 'status success';
                status.innerHTML = `
                    <div><span class="status-icon">‚úÖ</span><strong>Success! Accounts created!</strong></div>
                    <div style="margin-top: 10px;">
                        <div>‚úÖ Admin: admin@gmail.com / admin123</div>
                        <div>‚úÖ Student: markjeresoltam@gmail.com / student123</div>
                    </div>
                    <div style="margin-top: 10px; font-size: 14px;">
                        You can now login with these credentials in the XpenseEase app!
                    </div>
                `;

            } catch (error) {
                console.error(error);
                status.className = 'status error';
                
                if (error.code === 'auth/email-already-in-use') {
                    status.innerHTML = `
                        <div><span class="status-icon">‚ö†Ô∏è</span><strong>Accounts already exist!</strong></div>
                        <div style="margin-top: 10px;">
                            You can login with:
                            <div>‚Ä¢ Admin: admin@gmail.com / admin123</div>
                            <div>‚Ä¢ Student: markjeresoltam@gmail.com / student123</div>
                        </div>
                    `;
                } else {
                    status.innerHTML = `
                        <div><span class="status-icon">‚ùå</span><strong>Error: ${error.message}</strong></div>
                        <div style="margin-top: 10px; font-size: 14px;">
                            Please follow the manual setup instructions below.
                        </div>
                    `;
                }
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
